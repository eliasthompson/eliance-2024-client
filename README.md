# Eliance 2024 Client

## Todo

- [ ] person box
  - [ ] rotate between persons
  - [ ] refocus to broadcaster and hide guests on big event
  - [ ] data for each person:
    - [ ] profile pic (twitch profile pic)
    - [ ] name (firebot name > twitch display name)
    - [ ] pronouns (pronouns pronouns > firebot pronouns > null)
    - [ ] twitch username (twitch login)
    - [ ] local time(?) (firebot timezone > null)
    - [ ] upcoming schedule(?) (twitch schedule > null)
    - [ ] endpoints:
      - [ ] 
    - [ ] event subs:
      - [ ] 
- [ ] event box
  - [ ] small events, social actions, and goals stay in box, big event expand the box to near full width
  - [ ] big events (event queue):
    - [ ] hype train created
    - [ ] hype train success
    - [ ] poll created
    - [ ] prediction created
    - [ ] prediction results
    - [ ] shoutout
    - [ ] announcement
    - [ ] raid
    - [ ] sub
    - [ ] resub
    - [ ] gift sub
    - [ ] community gift subs
    - [ ] prime sub
    - [ ] cheer
    - [ ] pyonchi cam
    - [ ] pyonchi treat
    - [ ] ring fit break
    - [ ] add quote
    - [ ] add one ice cube to water
    - [ ] [any cameo redemption]
    - [ ] backlog wheel selection
    - [ ] become vip
    - [ ] add custom layout element
    - [ ] channel goal created
    - [ ] channel goal met
    - [ ] charity donation
    - [ ] donation goal met
  - [ ] small events (event queue - always shown after big events):
    - [ ] poll results
    - [ ] hype train failure
    - [ ] new follower
    - [ ] hydrate
    - [ ] give mary a cookie
  - [ ] social actions (on until over):
    - [ ] poll AND hype train (rotate)
    - [ ] predicitons AND pinned chat (rotate)
  - [ ] goals:
    - [ ] chanel goals loop
    - [ ] donation goals
  - [ ] endpoints:
    - [ ] 
  - [ ] event subs:
    - [ ] 
- [ ] chat box
  - [ ] hide on big event
  - [ ] chat mode column w/ icons (?)
    - [ ] follower mode
    - [ ] subscriber mode (?)
    - [ ] slow mode (?)
    - [ ] emote mode
    - [ ] endpoints:
      - [ ] [`GET chat/settings`](https://dev.twitch.tv/docs/api/reference/#get-chat-settings)
    - [ ] event subs:
      - [ ] [`channel.chat_settings.update`](https://dev.twitch.tv/docs/eventsub/eventsub-subscription-types/#channelchat_settingsupdate)
  - [ ] data for each chat:
    - [ ] `channel.chat.message`
      - [ ] message types:
        - [ ] text
        - [ ] channel_points_highlighted
        - [ ] channel_points_sub_only
        - [ ] user_intro
        - [ ] power_ups_message_effect
        - [ ] power_ups_gigantified_emote
    - [ ] `channel.chat.notification`
      - [ ] notice types:
        - [ ] sub - unhandled, will be event
        - [ ] resub - handled only if includes messages
        - [ ] sub_gift - unhandled, will be event
        - [ ] community_sub_gift - unhandled, will be event
        - [ ] gift_paid_upgrade - handled only if includes messages
        - [ ] prime_paid_upgrade - handled only if includes messages
        - [ ] raid - unhandled
        - [ ] unraid - unhandled
        - [ ] pay_it_forward - unhandled
        - [ ] announcement - handled
        - [ ] bits_badge_tier - handled only if includes messages
        - [ ] charity_donation - handled only if includes messages
    - [ ] endpoints:
      - [ ] 
    - [ ] event subs:
      - [ ] [`channel.chat.message`](https://dev.twitch.tv/docs/eventsub/eventsub-subscription-types/#channelchatmessage)
      - [ ] [`channel.chat.notification`](https://dev.twitch.tv/docs/eventsub/eventsub-subscription-types/#channelchatnotification)
  - [ ] show text, emotes, badges, pronouns, mentions, username, color, & bits
  - [ ] handle deletes, timeouts, and clears
  - [ ] handle special messages (highlights, resubs, announcements(?), big emotes/powerups)
- [ ] error display and handling
- [ ] design
- [ ] animations

### Guest/User Data Flow

- on load:
  - [x] Twitch: `GET /validate` Validate Token - get broadcaster id and do an auth check
  - [x] Chat Pronouns: `GET /pronouns` Get Pronouns - get pronoun data for reference
  - [x] Firebot: `GET /customRoles/:customRoleId` Get Custom Role - get all existing guest ids
  - when initial data is loaded, then:
    - [x] Twitch: `GET /guest_star/session` Get Guest Star Session - get all guest ids who are in guest star
    - if there are guests to add, then:
      - [x] Firebot: `POST /customRoles/:customRoleId/viewers/:userId` Add Viewer To Custom Role - add guests to custom role
    - get all person data:
      - [x] Twitch: `GET /chat/color` Get User Chat Color - get color data on all persons (color = firebotColor)
      - [x] Chat Pronouns: `GET /users/:login` Get User - get user pronoun data on all persons (pronouns)
      - [x] Firebot: `GET /viewers/:userId` Get Viewer - get viewer data on all persons (color = defaultColor, name = displayName, pronouns = apiPronouns)
      - [x] Twitch: `GET /users` Get Users - get user data on all persons (display_name, profile_image_url, login)
      - [x] Twitch: `GET /streams` Get Streams - get stream data on all persons (isLive)
      - if viewer has no metadata, then:
        - [ ] Firebot: `POST /viewers/:userId` Add Metadata To View - add metadata to viewer (only iscontent, )
    - combine & show data
- [ ] on event:
  - [ ] on guest star guest update:
    - [ ]  fix guest list and refetch stuff if needed
  - [ ] on firebot custom role update
    - [ ] fix guest list and refetch stuff if needed
